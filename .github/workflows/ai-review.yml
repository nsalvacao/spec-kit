name: AI Review

on:
  pull_request:
    types: [opened, synchronize, reopened]
    paths:
      # Only run on real code/config changes â€” skip pure doc PRs
      - "src/**"
      - "tests/**"
      - "scripts/**"
      - "templates/**"
      - ".github/workflows/**"
      - "pyproject.toml"
      - "uv.lock"

jobs:
  code-review:
    permissions:
      contents: read
      pull-requests: write
    uses: nsalvacao/actions-hub/.github/workflows/ai-code-review.yml@main
    with:
      model: "openai/gpt-4.1"
      max_diff_chars: 8000
      language: "en"
    secrets:
      MODELS_PAT: ${{ secrets.MODELS_PAT }}

  pr-summary:
    permissions:
      contents: read
      pull-requests: write
    uses: nsalvacao/actions-hub/.github/workflows/ai-pr-summary.yml@main
    with:
      model: "openai/gpt-4.1-mini"
      max_diff_chars: 6000
      language: "en"
    secrets:
      MODELS_PAT: ${{ secrets.MODELS_PAT }}
